<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>VCU Advisor Portal</title>
  <style>
    body, h1, h2, p, ul, li, a, label, input, button {
      margin: 0; padding: 0; box-sizing: border-box;
    }
    body {
      font-family: Arial, sans-serif;
      background:#f4f4f4; color:#333;
      display:flex; flex-direction:column; min-height:100vh;
      line-height:1.6;
    }
    header {
      background: #f1e130;
      color: #fff;
      padding: 20px;
      text-align: center;
      position: relative;
    }
    .container {
      flex: 1;
      display: flex;
    }
    nav {
      width: 220px;
      background: #978a35;
      padding: 20px 10px;
    }
    nav ul {
      list-style: none;
    }
    nav li {
      margin: 15px 0;
    }
    nav a {
      color: #fff;
      text-decoration: none;
      font-weight: bold;
      display: block;
      padding: 8px;
      border-radius: 5px;
      transition: background 0.3s;
    }
    nav a:hover {
      background: #b0b315d6;
    }
    main {
      flex: 1;
      padding: 40px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      margin-top: 15px;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: left;
    }
    th {
      background: #f1e130;
    }
    input, select, button {
      margin: 8px 10px 15px 0;
      padding: 6px;
    }
    button {
      background: #6f7639;
      color: #fff;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
    }
    button:hover {
      background: #4d5327;
    }
    #status {
      margin-top: 15px;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <header>
    <h1>VCU Advisor Portal</h1>
  </header>

  <div class="container">
    <nav>
      <ul>
        <li><a href="homescreen.html">Home</a></li>
        <li><a href="course-search.html">Course Search</a></li>
        <li><a href="ui_ux-loginscreen.html">Student Registration</a></li>
        <li><a href="instructor-schedule.html">Instructor Schedule</a></li>
        <li><a href="session-enrollment.html">Session Enrollment</a></li>
        <li><a href="advisor-portal.html">Advisor Portal</a></li>
      </ul>
    </nav>

    <main>
      <h2>Advisor Override Management</h2>

      <form onsubmit="event.preventDefault(); searchStudent();">
        <label for="studentSearch">Search Student (Name or ID):</label>
        <input type="text" id="studentSearch" placeholder="Enter student name or ID" required />
        <button type="submit">Search</button>
      </form>

      <div id="studentInfo"></div>

      <div id="overrideSection" style="display:none;">
        <h3>Blocked Courses (Eligible for Override)</h3>
        <select id="blockedCourseSelect"></select>
        <button onclick="applyOverride()">Override &amp; Enroll</button>
      </div>

      <p id="status"></p>
    </main>
  </div>

  <footer>
    <p>&copy; 2025 Course Registration System</p>
  </footer>

  <script src="students.js"></script>
  <script src="courses.js"></script>
  <script>
    let selectedStudent = null;

    // Search student by ID or name
    function searchStudent() {
      const query = document.getElementById("studentSearch").value.trim().toLowerCase();
      selectedStudent = students.find(s =>
        s.id.toLowerCase() === query ||
        s.name.toLowerCase().includes(query)
      );

      const infoDiv = document.getElementById("studentInfo");
      const overrideSection = document.getElementById("overrideSection");
      const blockedSelect = document.getElementById("blockedCourseSelect");
      const status = document.getElementById("status");

      status.textContent = "";
      infoDiv.innerHTML = "";
      blockedSelect.innerHTML = "";
      overrideSection.style.display = "none";

      if (!selectedStudent) {
        infoDiv.innerHTML = "<p style='color:red;'>Student not found.</p>";
        return;
      }

      infoDiv.innerHTML = `
        <p><strong>Name:</strong> ${selectedStudent.name}</p>
        <p><strong>ID:</strong> ${selectedStudent.id}</p>
        <p><strong>Enrolled Courses:</strong> ${selectedStudent.enrolledCourses.join(", ") || "None"}</p>
        <p><strong>Blocked Courses:</strong> ${selectedStudent.blockedCourses.join(", ") || "None"}</p>
      `;

      if (selectedStudent.blockedCourses.length > 0) {
        selectedStudent.blockedCourses.forEach(course => {
          const option = document.createElement("option");
          option.value = course;
          option.textContent = course;
          blockedSelect.appendChild(option);
        });
        overrideSection.style.display = "block";
      }
    }

    // Override prerequisite & enroll student
    function applyOverride() {
      const selectedCourse = document.getElementById("blockedCourseSelect").value;
      const status = document.getElementById("status");

      if (!selectedStudent || !selectedCourse) {
        status.textContent = "Please select a student and a course.";
        status.style.color = "red";
        return;
      }

      const message = overridePrerequisite(selectedStudent.id, selectedCourse);
      status.textContent = "âœ… " + message;
      status.style.color = "green";

      // Refresh student info display
      searchStudent();
    }
  </script>
</body>
</html>
